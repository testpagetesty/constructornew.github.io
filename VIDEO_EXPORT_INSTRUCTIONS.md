# Инструкции по использованию системы экспорта видео

## Что было реализовано

Система экспорта видео была обновлена для работы аналогично системе экспорта изображений. Теперь видео экспортируются из кеша IndexedDB с использованием метаданных, сохраненных в localStorage.

## Основные изменения

### 1. Обновлен `siteExporter.js`
- Добавлена логика экспорта hero видео через метаданные
- Добавлен автоматический экспорт всех дополнительных видео из кеша
- Улучшено логирование и обработка ошибок
- Добавлены информационные файлы в экспорт

### 2. Обновлен `videoCacheService.js`
- Добавлен метод `getAllVideos()` для получения всех видео с ключами
- Добавлен метод `getAllVideoKeys()` для получения только ключей
- Улучшена структура возвращаемых данных

### 3. Обновлен `imageCacheService.js`
- Добавлены аналогичные методы для изображений
- Обеспечена консистентность API между сервисами

## Как использовать

### Шаг 1: Загрузка видео
1. Откройте HeroEditor
2. Выберите тип фона "Видео"
3. Нажмите "Выбрать видео" и выберите файл
4. Видео автоматически сохранится в кеш с метаданными

### Шаг 2: Экспорт сайта
1. Нажмите кнопку экспорта сайта
2. Система автоматически найдет все видео в кеше
3. Все видео будут включены в экспортируемый архив

### Шаг 3: Проверка результата
В экспортируемом архиве вы найдете:
- `assets/videos/` - папка с видео файлами
- `assets/` - видео файлы в корне assets (для совместимости)
- Информационные файлы с деталями экспорта

## Структура файлов

```
site-export.zip
├── assets/
│   ├── videos/
│   │   ├── hero.mp4 (или другое имя)
│   │   ├── additional-video.mp4
│   │   ├── VIDEO-EXPORT-SUCCESS.txt
│   │   └── ADDITIONAL-VIDEOS-EXPORT.txt
│   ├── hero.mp4
│   └── additional-video.mp4
└── index.html
```

## Файлы информации

- **VIDEO-EXPORT-SUCCESS.txt** - успешный экспорт hero видео
- **ADDITIONAL-VIDEOS-EXPORT.txt** - список всех дополнительных видео
- **README-VIDEO.txt** - инструкции по ручному добавлению
- **VIDEO-EXPORT-ERROR.txt** - информация об ошибках

## Отладка

### Проверка метаданных
```javascript
// В консоли браузера
const metadata = JSON.parse(localStorage.getItem('heroVideoMetadata') || '{}');
console.log('Video metadata:', metadata);
```

### Проверка кеша
```javascript
// Получить все видео из кеша
const allVideos = await videoCacheService.getAllVideos();
console.log('All videos:', allVideos);
```

### Тестирование
Запустите `test-video-export.js` в консоли браузера для проверки функциональности.

## Совместимость

- ✅ Полностью совместимо с существующим кодом
- ✅ Не нарушает работу старых функций
- ✅ Добавляет новую функциональность
- ✅ Обратная совместимость с файлами без метаданных

## Преимущества

1. **Автоматизация** - все видео экспортируются автоматически
2. **Надежность** - использование метаданных для точного поиска
3. **Информативность** - подробные логи и файлы с информацией
4. **Отказоустойчивость** - fallback на стандартные имена
5. **Консистентность** - единый подход для видео и изображений

## Поддерживаемые форматы

- MP4
- WebM  
- OGG

## Ограничения

- Максимальный размер видео: 50MB
- Видео должно быть загружено через HeroEditor для корректного экспорта
- Метаданные должны быть сохранены в localStorage

## Поддержка

При возникновении проблем:
1. Проверьте консоль браузера на наличие ошибок
2. Убедитесь, что видео загружено в HeroEditor
3. Проверьте наличие метаданных в localStorage
4. Обратитесь к файлам информации в экспортируемом архиве
